var PRD=function(e,t){var u={util:{formOrEngine:o,logerror:c,coerceToString:b,JSONobj:{parse:p,stringify:m,get:function(e,t,r){var n,a,o,i,s,l,u,g="";n="JSONobj.get(): ",s="string"==typeof e?p(e):e;{if("string"!=typeof t)return d(n+"parameter whattotest should be a string value."),g;l=h(y(t))}"string"!==r&&"number"!==r&&"raw"!==r&&(r="raw");for(i=s,a=0;a<l.length;a++){if(u=l[a],d(n+'Parsing: "'+u+'", type: '+typeof u),!("object"==typeof i&&u in i))return c(n+"parsing "+t+', could not find property "'+u+'" in the current object location.'),g;o=i[u],i=o}switch(r){case"string":g=String(o);break;case"number":g=Number(o);break;case"raw":g=o}return g},test:function(e,t){var r,n,a,o,i,s,l;r="JSONobj.test(): ",i="string"==typeof e?p(e):e;{if("string"!=typeof t)return d(r+"parameter whattotest should be a string value."),!1;s=h(y(t))}for(o=i,n=0;n<s.length;n++){if(l=s[n],d(r+'Parsing: "'+l+'", type: '+typeof l),!("object"==typeof o&&l in o))return d(r+"parsing "+t+', could not find property "'+l+'" in the current object location.'),!1;a=o[l],o=a}return!0}}},setlogprefix:a,version:function(){return"1.0.4"},IDVget:function(e,t,r,n){var a,o,i,s=[];i="IDVget(): ","engine"===l&&(IDVobj=IDVault);if("form"===l){if(null===g.IDVault)return c(i+"please use PRD.init() with at least IDVault as a parameter to initialize the mandatory reference to the same. Aborting."),s;IDVobj=g.IDVault}if(null==e||null==t||null==r)return(o=[]).push(i+"missing mandatory parameters."),o.push("ldapdn: "+String(e)+","),o.push("entkey: "+String(t)+","),o.push("attrkey: "+String(r)+","),c(o.join(" ")),s;try{"form"===l&&(null==n&&(n=null),a=IDVobj.get(n,e,t,r)),"engine"===l&&(a=IDVobj.get(e,t,r)),null===a||("string"==typeof a?s.push(b(a)):"form"===l&&a instanceof Array?s=a:"engine"===l&&"object"==typeof a&&0<a.size()&&(s=D(a)))}catch(e){c(i+"Error occured during IDVault.get query. Aborting. Error message: "+e.message)}return s},IDVglobalQuery:function(e,t,r){var n,a,o,i=[],s="";o="IDVglobalQuery(): ","engine"===l&&(IDVobj=IDVault);if("form"===l){if(null===g.IDVault)return c(o+"please use PRD.init() with at least IDVault as a parameter to initialize the mandatory reference to the same. Aborting."),i;IDVobj=g.IDVault}if(null==e||null==t)return(a=[]).push(o+"missing mandatory parameters."),a.push("dalquerykey: "+String(e)+","),s=null===t?String(t):m(t),a.push("parameters: "+s+","),c(a.join(" ")),i;try{"form"===l&&(null==r&&(r=null),(n=IDVobj.globalQuery(r,e,t))instanceof Array&&0<(n[0]instanceof Array)&&""!=n[0][0]&&(i=n[0])),"engine"===l&&null!=(n=IDVobj.globalQuery(e,t))&&0<n.size()&&(i=D(n))}catch(e){c(o+"Error occured during IDVault.globalQuery . Aborting. Error message: "+e.message)}return i}};var i,s,n,r,g={field:null,form:null,IDVault:null},l=o();function a(e){n=b(e,"")}function o(){var e="Detection failed";return"object"==typeof window&&"document"in window&&"undefined"==typeof java&&(e="form"),"object"==typeof java&&"lang"in java&&"String"in java.lang&&"undefined"==typeof window&&(e="engine"),e}function c(e){var t,r;if(e=String(e),r=String(n),"engine"===l)try{t=process.getRequestId(),t+=": "}catch(e){}try{"form"===l&&console.log(r+e),"engine"===l&&java.lang.System.out.println(r+t+e)}catch(e){return!1}return!0}function d(e){r&&c(e)}function f(e,t){var r;if("objectHasFunctions(): ",null===e||"object"!=typeof e||!(t instanceof Array)||0===t.length)return d("objectHasFunctions(): Please review your input parameters."),!1;for(r=0;r<t.length;r++){if(!e.hasOwnProperty(t[r]))return!1;if("function"!=typeof e[t[r]])return!1}return!0}function p(e,t){var r,n,a;r="JSONobj.parse(): ",a=s;try{n=a.parse(e,t)}catch(e){c(r+e.message)}return n||(d(r+"input processing resulted in a null value."),{})}function m(e,t,r){var n,a,o;n="JSONobj.stringify(): ",o=s;try{a=o.stringify(e,t,r)}catch(e){c(n+e.message)}return a||(d(n+"input processing resulted in a null value."),"")}function y(e){var t=[];try{t=String(e).split(/(?=(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/)}catch(e){c("stringToCharArray(): Failed to split the input string, error: "+e.message)}return t}function h(e){var t,r,n,a,o,i=[];if("charArrToPropertyNames(): ",!(e instanceof Array))return c("charArrToPropertyNames(): Input parameter is not an Array, aborting."),i;for(r="",a=/^\d+$/,o=/^(['"])(.+)\1$/,n="["===e[0]?"first":"end",t=0;t<e.length;t++)"first"!==n||"["!==e[t]?"end"!==n||"["!==e[t]?"start"!==n||"]"!==e[t]?"end"!==n||"."!==e[t]?r+=e[t]:(""!==r.trim()&&i.push(r.trim()),r=""):(n="end",r=r.trim(),a.test(r)&&(r=Number(r)),o.test(r)&&(r=o.exec(r)[2]),i.push(r),r=""):(n="start",""!==r.trim()&&i.push(r.trim()),r=""):n="start";return""!==r&&i.push(r.trim()),i}function b(e,t){var r,n="";return null!=t&&"string"==typeof t&&(n=String(t)),null==e||("string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||(r=String(e)),e instanceof Array&&(r=String(e.join(" "))),""!==r&&(n=r)),n}function N(e){return null!==e&&("object"==typeof e&&e.getNodeType()==w.nodetype.Element||"object"==typeof e&&e.getNodeType()==w.nodetype.Text&&(1!==e.getNodeValue().length||10!==e.getNodeValue().charCodeAt(0)))}function v(e){var t,r,n,a,o,i,s,l,u;if(t="flowdata2obj(): ",r=[""],l={},u=!0,e instanceof Array){for(d(t+"Received array for processing, length: "+e.length),r=[{}],n=0;n<e.length;n++)if(e[n].hasChildNodes())for(d(t+"node at position "+n+" has child nodes"),i=e[n].getChildNodes(),a=0;a<i.getLength();a++)d(t+"array index "+n+": processing child node "+a),(s=i.item(a)).getNodeType()==w.nodetype.Text&&N(s)&&(d(t+'Found text node. getNodeValue(): "'+s.getNodeValue()+'"'),r.push(String(s.getNodeValue()))),s.getNodeType()==w.nodetype.Element&&(d(t+'found element node "'+(o=String(s.getNodeName()))+'"'),l.hasOwnProperty(o)||(l[o]=[]),l[o].push(s),u=!1);for(o in l)r[0][o]=v(l[o]);u&&(r=r.splice(1))}return r}function w(){var e={};return e.Attr=Packages.org.w3c.dom.Node.ATTRIBUTE_NODE,e.CDATASection=Packages.org.w3c.dom.Node.CDATA_SECTION_NODE,e.Comment=Packages.org.w3c.dom.Node.COMMENT_NODE,e.DocumentFragment=Packages.org.w3c.dom.Node.DOCUMENT_FRAGMENT_NODE,e.Document=Packages.org.w3c.dom.Node.DOCUMENT_NODE,e.DocumentType=Packages.org.w3c.dom.Node.DOCUMENT_TYPE_NODE,e.Element=Packages.org.w3c.dom.Node.ELEMENT_NODE,e.Entity=Packages.org.w3c.dom.Node.ENTITY_NODE,e.EntityReference=Packages.org.w3c.dom.Node.ENTITY_REFERENCE_NODE,e.Notation=Packages.org.w3c.dom.Node.NOTATION_NODE,e.ProcessingInstruction=Packages.org.w3c.dom.Node.PROCESSING_INSTRUCTION_NODE,e.Text=Packages.org.w3c.dom.Node.TEXT_NODE,e}function D(e){var t,r,n=[];if(r="JavaVectorToECMAArray(): ","engine"===l){if(null!=e&&"object"==typeof e&&0<e.size())try{for(t=e.iterator();t.hasNext();)n.push(String(t.next()))}catch(e){c(r+"Error converting Vector into Array: "+e.message)}return n}c(r+"can only be used in the workflow engine.")}function V(e){var t,r,n;if(n="ECMAArrayToJavaVector(): ","engine"===l)try{for(r=new java.util.Vector,t=0;t<e.length;t++)r.add(i(e[t]));return r}catch(e){c(n+"Error converting Array into Vector: "+e.message)}else c(n+"can only be used in the workflow engine.")}return"engine"===l&&(i=java.lang.String,s=ScriptVault.JSON),"form"===l&&(s=JSON),r=!0===t,a(e),"engine"===l&&(w.nodetype=w()),"engine"===l&&(u.util.JavaVectorToECMAArray=D,u.util.ECMAArrayToJavaVector=V,u.util.GCVget=function(t,e,r){var n,a,o="";if(a="GCVget(): ",null!=r&&(o=String(r)),null!=t&&""!==t){t=String(t);try{n=GCV.get(t)}catch(e){c(a+'Failed to retrieve value for GCV "'+t+'", Error: '+e.message)}}else c(a+"GCVname not provided.");if(!n)return c(a+'GCV.get( "'+t+'" ) returned null value. Please make sure the same is available on the User Application driver'),o;switch(String(e)){case"boolean":return Boolean(n);case"number":return Number(n);default:return String(n)}},u.util.getNamedPassword=function(t,e){var r,n,a=null;if(n="getNamedPassword(): ",null!=t&&""!==t)if(t=String(t),null!=e)e:for(r=0;r<5;r++){try{a=GCV.getValueForNamedPassword(t)}catch(e){c(n+'Failed to retrieve value for Named Password "'+t+'", Error: '+e.message)}if(null!=a&&""!==a)break e;try{c(n+"Failed attempt "+(r+1)+' to retrieve Named Password "'+t+'". Pausing for 1 second then retrying.'),java.lang.Thread.sleep(1e3)}catch(e){c(n+"And now failed to try and pause for a second as well. Error: "+e.message)}}else try{a=GCV.getValueForNamedPassword(t)}catch(e){c(n+'Failed to retrieve value for Named Password "'+t+'", Error: '+e.message)}else c(n+"NamedPassword not provided.");return a||(c(n+'GCV.getValueForNamedPassword( "'+t+'" ) returned null value. Please make sure the same is available on the User Application driver'),"")},u.util.Unique=function(e,t){var r,n,a,o,i={},s=[];if(null!=e&&"object"==typeof e&&("getClass"in e&&"class java.util.Vector"==e.getClass()?(e=D(e),r=!0):r=!1,e instanceof Array)){for(n=0;n<e.length;n++)a=String(e[n]),o=!0===t?a.toLowerCase():a,i.hasOwnProperty(o)||(s.push(a),i[o]=!0);r&&(s=V(s))}return s},u.util.Compare=function(e,t,r){var n,a,o,i={},s={},l=[],u=[],g=[],c=[];if(null!=e&&"object"==typeof e&&null!=t&&"object"==typeof t&&("getClass"in e&&"class java.util.Vector"==e.getClass()&&(e=D(e)),"getClass"in t&&"class java.util.Vector"==t.getClass()&&(t=D(t)),e instanceof Array&&t instanceof Array)){for(n=0;n<e.length;n++)a=String(e[n]),o=!0===r?a.toLowerCase():a,i.hasOwnProperty(o)||(c.push(a),i[o]=!0);for(n=0;n<t.length;n++)a=String(t[n]),o=!0===r?a.toLowerCase():a,s.hasOwnProperty(o)||(s[o]=!0,i.hasOwnProperty(o)?g.push(a):u.push(a));for(n=0;n<c.length;n++)a=String(c[n]),o=!0===r?a.toLowerCase():a,s.hasOwnProperty(o)||l.push(a)}return[l,u,g]},u.util.getObject2arr=function(e,t){var r,n,a,o,i,s,l;if(n="getObject2arr(): ",l=!(r=null),null===e||"object"!=typeof e||"class java.util.ArrayList"!=e.getClass())return c(n+"Invalid parameter received. list must be the result of a flowdata.getObject() call."),r;if(0<e.size()&&(a=e.get(0)),null!=a&&"object"==typeof a&&"class org.apache.xerces.dom.ElementNSImpl"==a.getClass()){for(o=a,r=[{}],s={};o;)o.getNodeType()==w.nodetype.Text&&N(o)&&(d(n+'found text node. getNodeValue(): "'+o.getNodeValue()+'"'),r.push(String(o.getNodeValue()))),o.getNodeType()==w.nodetype.Element&&(d(n+'found element node "'+(i=String(o.getNodeName()))+'"'),s.hasOwnProperty(i)||(s[i]=[]),s[i].push(o),l=!1),o=o.getNextSibling();for(i in s)r[0][i]=v(s[i]);l&&(r=r.splice(1))}return r},u.util.basicHTTPauthHeader=function(e,t){var r,n,a,o;if(r="basicHTTPauthHeader(): ",null==e||null==t)return c(r+"username and password must be provided and not null nor undefined."),"";try{o=new Packages.org.apache.commons.codec.binary.Base64,a=i(e+":"+t).getBytes("UTF-8"),n="Basic "+i(o.encodeBase64(a),"UTF-8")}catch(e){c(r+"Failed to build Basic Authentication HTTP header value. Error: "+e.message)}return n},u.util.shouldRetry=function(e,t){return(e=0|String(e))<(t=0|String(t))}),"form"===l&&(u.init=function(e,t,r){var n,a,o=[];for(n="PRD.init(): ",null!=e?o.push(e):c(n+"requires at least one parameter."),null!=t&&o.push(t),null!=r&&o.push(r),a=0;a<o.length;a++)l=o[a],f(l,["getName","getLabel","validate","fireEvent","hide","show","enable","disable","getValue","getValues","getAllValues","setValues","focus","select","activate","setRequired"])&&null===g.field?(c(n+"setting up internal reference to field."),g.field=o[a],"web"in u&&(u.web.field=o[a])):(s=o[a],f(s,["getField","alert","showMsg","showWarning","showError","showFatal","validate","submit","getLabel","hide","show","enable","disable","getValue","getValues","getAllValues","setValues","focus","select","activate","setRequired","interceptAction","getLocale","getDefaultLocale","getRBMessage","stringToDate","dateToString","isValidDate","showDebugMsg","addCustomValidation","clearMessages"])&&null===g.form?(c(n+"setting up internal reference to form."),g.form=o[a],"web"in u&&(u.web.form=o[a])):(i=o[a],f(i,["globalQuery","containers","get","globalList","getGuidFromDn","getDnFromGuid","execService"])&&null===g.IDVault?(c(n+"setting up internal reference to IDVault."),g.IDVault=o[a],"web"in u&&(u.web.IDVault=o[a])):c(n+"Parameter obj"+(a+1)+" is not one of the 3 expected framework objects, skipping it.")));var i;var s;var l},u.web={fieldVisibility:function(e,t){var r=String(e.getCustomData());switch(r.toLowerCase()){case"show":t.show();break;case"hide":t.hide();break;default:c("Field: "+t.getLabel()+", Event: "+e.getEventName()+", Invalid option received: "+r)}}}),u}("===> ");